<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- css files for DataTables -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.js"></script>
    <script src="https://cdn.datatables.net/2.0.8/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/autofill/2.7.0/js/autoFill.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/autofill/2.7.0/js/dataTables.autoFill.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.bootstrap5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.colVis.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdn.datatables.net/select/2.0.3/js/dataTables.select.js"></script>
    <script src="https://cdn.datatables.net/select/2.0.3/js/select.dataTables.js"></script>

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/2.0.8/css/dataTables.bootstrap5.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/autofill/2.7.0/css/autoFill.bootstrap5.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/3.0.2/css/buttons.bootstrap5.min.css" />
</head>

<script>
        var table = null;
        $(document).ready(function() {
            table = $('#table').DataTable({
                layout: {
                    topStart: {
                        buttons: [
                            {
                                extend: 'colvis',
                                text: "선택",
                            },
                            {
                                extend: 'copy',
                                text: "복사",
                            },
                            {
                                extend: 'excel',
                                text: "엑셀다운로드",
                            },
                            {
                                text: '수주 추가',
                                action: function (e, dt, node, config) {
                                    $('#addOrderModal').modal('show'); // 모달 창을 띄움
                                }
                            }

                        ]
                    }
                },
                responsive: true,
                destroy: true,
                select: true,
                processing: true,
                serverSide: false,
                ordering: true,
                scrollX: true,
                info: false,
                ajax: {
                    url: 'http://localhost:8080/api/orders',
                    type: 'GET',
                    dataFilter: function (res) {
                        var json = $.parseJSON(res);

                        var data = {
                            'draw': json.data.draw,
                            'recordsTotal': json.data.recordsTotal,
                            'recordsFiltered': json.data.recordsFiltered,
                            'data': json.data,

                        };
                        return JSON.stringify(data);
                    }
                },

                columns: [
                    {title: "수주번호", data: 'orderNumber'},
                    {title: "업체명", data: 'client'},
                    {title: "상태", data: 'status'},
                    {title: "불량률", data: 'defectPercentage'},
                    {title: "담당자", data: 'manager'},
                    {title: "취소 사유", data: 'cancelReason'},
                    {title: "전화번호", data: 'phoneNumber'},
                    /*{title: "수주확정일", data: 'regtime'},*/
                    {title: "납품일", data: 'deliveryDate'},
                    {title: "가동률", data: 'capa'},

                ],
                language: {
                    search: "검색:"
                }
            })
        });

</script>
<body>
<div class="container1">
    <table id="table" class="table table-striped table-bordered table-hover" >
    </table>

    <!-- 모달 -->
    <div class="modal fade" id="addOrderModal" tabindex="-1" role="dialog" aria-labelledby="addOrderModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addOrderModalLabel">수주 추가</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <!-- 폼 입력 필드들 -->
                    <form id="addOrderForm">   <!-- -->
                        <!-- 입력 필드 예시, 필요에 따라 수정 또는 추가 -->
                        <div class="form-group">
                            <label for="clientName">제품명</label>
                            <input type="text" class="form-control" id="clientName" name="clientName">
                            <label for="clientName">업체명</label>
                            <input type="text" class="form-control" id="client" name="clientName">
                            <label for="clientName">담당자</label>
                            <input type="text" class="form-control" id="manager" name="clientName">
                        </div>
                        <!-- 추가 입력 필드들 -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-primary" onclick="">저장</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>